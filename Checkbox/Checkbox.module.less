// Checkbox.module.less
//
@import "../styles/variables.less";
@import "../styles/mixins.less";
@import "../styles/skin.less";

// Local mixin to make rule application more consistent.
.checkboxColors (@color, @bg, @border) {
	color: @color;
	background-color: @bg;
	box-shadow: 0 0 0 @sand-checkbox-border-width @border;
}

.checkbox {
	margin: 0;

	// Spottable version of the Checkbox
	.spottable({
		&::after {
			content: "";
			position: absolute;
			.position(@sand-checkbox-container-position);
			border-radius: @sand-checkbox-container-border-radius;
			z-index: -1;
		}
	});

	.applySkins({
		.checkboxColors(
			@sand-checkbox-color,
			@sand-checkbox-bg-color,
			@sand-checkbox-border-color
		);
		border-radius: @sand-checkbox-border-radius;
		margin: 0;  // Needed to apply here insetad of on `.checkbox` due to .icon.size precedence :(

		&.selected {
			&:not(.indeterminate) {
				.checkboxColors(
					@sand-checkbox-selected-color,
					@sand-checkbox-selected-bg-color,
					@sand-checkbox-selected-border-color
				);
			}
			&.indeterminate {
				.checkboxColors(
					@sand-checkbox-indeterminate-color,
					@sand-checkbox-indeterminate-bg-color,
					@sand-checkbox-indeterminate-border-color
				);
			}
		}

		// Spottable version of the Checkbox
		.spottable({
			&::after {
				.sand-spotlight-resting-colors();
			}
		});

		.focus({
			.checkboxColors(
				@sand-checkbox-focus-color,
				@sand-checkbox-focus-bg-color,
				@sand-checkbox-focus-border-color
			);

			&::after {
				.sand-spotlight-focus-colors();
			}

			&.selected {
				&:not(.indeterminate) {
					.checkboxColors(
						@sand-checkbox-selected-focus-color,
						@sand-checkbox-selected-focus-bg-color,
						@sand-checkbox-selected-focus-border-color
					);
				}
				&.indeterminate {
					.checkboxColors(
						@sand-checkbox-indeterminate-selected-focus-color,
						@sand-checkbox-indeterminate-selected-focus-bg-color,
						@sand-checkbox-indeterminate-selected-focus-border-color
					);
				}
			}
		});
	});
}

// When the parent is focused
.focus({
	.checkbox {
		.applySkins({
			.checkboxColors(
				@sand-checkbox-focus-color,
				@sand-checkbox-focus-bg-color,
				@sand-checkbox-focus-border-color
			);

			&.selected {
				&:not(.indeterminate) {
					.checkboxColors(
						@sand-checkbox-selected-focus-color,
						@sand-checkbox-selected-focus-bg-color,
						@sand-checkbox-selected-focus-border-color
					);
				}
				&.indeterminate {
					.checkboxColors(
						@sand-checkbox-indeterminate-selected-focus-color,
						@sand-checkbox-indeterminate-selected-focus-bg-color,
						@sand-checkbox-indeterminate-selected-focus-border-color
					);
				}
			}

			// Spottable version of the Checkbox
			.spottable({
				&::after {
					.sand-spotlight-focus-colors();
				}
			});
		});
	}
}, parent);
